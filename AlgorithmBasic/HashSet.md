# DeepDive into HashSet

## 목차
[1. HashSet에서 contains](#hashset에서-contains)



### HashSet에서 contains
- HashSet에서 contains는 항상 O(1)의 시간 복잡도를 가진다고 생각을 했었다.
- 하지만, 최악의 경우 O(N)의 시간 복잡도를 가질 수 있다.

- 왜 그럴까?
- 자바에서 `HashSet`의 `contains()` 메서드의 시간 복잡도는 일반적으로는 O(1)이 맞다.
- 하지만,
- HashSet은 내부적으로 해시 테이블을 사용해 요소들을 저장하고 검색한다.
- contains() 메서드는 내부적으로 요소의 해시 코드를 계산하고 해당 버킷에서 요소를 검색해 찾는 요소가 있는지 여부를 확인한다.
- 이 때, 내부의 해시 테이블은 버킷 배열을 사용해 요소를 저장하는데
- 각 요소는 해당 요소의 해시 코드에 따라 버킷 배열의 특정 인덱스에 저장된다.

- 하지만, hashCode() 메서드에서 생성된 해시 코드는 중복될 수 있으므로, 서로 다른 요소가 동일한 해시 코드를 가질 수 있다.
- 이러한 상황을 `충돌`이라고 부른다.
- 충돌이 발생하면 HashSet은 같은 버킷 내에 LinkedList로 요소를 저장한다.
- 따라서, contains() 메서드는 요소를 찾기 위해 같은 버킷 내에 LinkedList를 탐색해야 할 수도 있다.

- 최악의 경우는 모든 요소가 같은 버킷 내에 저장돼 LinkedList의 길이가 모든 요소의 수에 비례하는 경우이며,
- 이 때, contains() 메서드의 실행 시간은 O(N)이 된다.

> 하지만 일반적으로 해시 함수가 충돌을 최소화하도록 설계되고,  
> HashSet은 자동으로 버킷 크기를 조정해 충돌을 최소화하도록 최적화되어 있다.  
> 따라서, 대부분의 상황에서 contains() 메서드의 시간 복잡도는 O(1)로 볼 수 있다.